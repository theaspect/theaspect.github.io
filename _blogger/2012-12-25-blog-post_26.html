---
layout: post
title: Программирование в допущениях
date: '2012-12-26T01:22:00.000+07:00'
author: Constantine Linnick
tags:
- мысли
- development
modified_time: '2014-04-10T15:47:19.707+07:00'
blogger_id: tag:blogger.com,1999:blog-372595778394672936.post-7453008996105260172
blogger_orig_url: http://blog.blzr.me/2012/12/blog-post_26.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: right;"><a href="http://theprofoundprogrammer.com/post/28318382256" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://24.media.tumblr.com/tumblr_m7yk52k0n21rzupqxo9_400.png" /></a></div>Самые серьезные падения систем происходят из-за нарушения <a href="http://vit-r.livejournal.com/606262.html">допущений </a>и неявных контрактов: что ответ от системы всегда будет приходить мгновенно, что ответ вообще когда нибудь придет, куча <a href="http://www.rsdn.ru/forum/life/2395140.all">пространственно-временных допущений</a>, <a href="http://habrahabr.ru/post/146109/">календарных</a> и <a href="http://habrahabr.ru/post/146901/">именных</a>.&nbsp; Сюда же можно отнести <a href="http://geekandpoke.typepad.com/geekandpoke/2010/10/yiw.html">YIW</a>, <a href="http://geekandpoke.typepad.com/geekandpoke/2010/10/advanced-yiw-ommiw.html">OMMIW</a>, "я исправил одну строку, зачем тестировать", и другие связанные с тестированием.<br /><br /><a name='more'></a><br /><br /><a href="http://http//theprofoundprogrammer.com/post/37366702416" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://25.media.tumblr.com/bbff7fc307339c04b1e8dd7d8f147625/tumblr_memwxnuE0x1rzupqxo1_500.png" width="320" /></a>Хуже всего, если для краха нужно нарушение сразу нескольких допущений - в этом случае система может работать годами (наименьшее общее кратное нескольких достаточно больших простых чисел очень велико), считаться из-за этого абсолютно надежной, а это еще одно допущение. На этом допущении строятся другие системы, и так далее, пока в один прекрасный момент не случается каскадный резонанс.<br /><br />Впервые о допущениях задумался, когда в течении двух дней были нарушены сразу два сделанных допущения: что в одной организации не будут работать полные тёзки, а затем, что табельный номер и полное имя влезут в имя excel страницы (30 символов). А самый страшный момент был при написании системы восстановления из резервной копии, когда процесс запускается и становится полностью автономным без возможности влиять на него. При этом процесс состоит из нескольких этапов, на любом из которых может произойти ошибка, неправильно обработав которую, можно брикнуть систему.<br /><br />С ростом опыта, разработчик, прогулявшись по полям, усеянным граблями, сначала начинает осознавать и видеть допущения, которые он делает; затем в комментариях их описывать, что позволит быстрее выявить проблему, когда опять все рухнуло; потом начнет требовать от входных данных выполнения контракта и ненарушения допущений; и только после этого в системе начнет появляться <a href="http://habrahabr.ru/post/124778/">живучесть</a>, когда работа продолжается, даже если все сломалось, а если таки упало то выдается <a href="http://metaclass.livejournal.com/751470.html">максимум информации</a>. Хотя, конечно, степень живучести ограничивается требованиями и временем, но, порой, пара строк кода в нужном месте драматически сказывается на выживаемости. Хуже, если это случается post mortem.</div>