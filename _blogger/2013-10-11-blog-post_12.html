---
layout: post
title: Код с драконами, перцептивная слепота и синдром утёнка
date: '2013-10-12T02:53:00.000+07:00'
author: Constantine Linnick
tags:
- работа
- development
modified_time: '2014-04-10T15:47:19.713+07:00'
blogger_id: tag:blogger.com,1999:blog-372595778394672936.post-7770755096324084440
blogger_orig_url: http://blog.blzr.me/2013/10/blog-post_12.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div class="separator" style="clear: both; text-align: center;"><a href="http://blog.myabc.ru/2012/02/chopchop.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="263" src="http://blog.myabc.ru/2012/02/chopchop.jpg" width="320" /></a></div><h4 style="text-align: left;">Here be Dragons</h4>Я искренне верю, что все люди по-умолчанию разумны, по крайней мере вокруг меня, откровенные идиоты мне встречались крайне редко, а про вредителей я только слышал рассказы. Возможно, это некое проявление эффекта <a href="http://ru.m.wikipedia.org/wiki/%D0%AD%D1%84%D1%84%D0%B5%D0%BA%D1%82_%D0%94%D0%B0%D0%BD%D0%BD%D0%B8%D0%BD%D0%B3%D0%B0_%E2%80%94_%D0%9A%D1%80%D1%8E%D0%B3%D0%B5%D1%80%D0%B0">Даннинга-Крюгера</a>.<br /><br />Когда я вижу какой-то вотзефак в коде, дикое решение, выбор технологии, вотэва - я уверен, что человек выбрал лучшее решение на тот момент. Даже если в итоге получился дичайший монстр, который, как памятник, служит предостережением будущим поколениям. Этому может быть три причины.<br /><br /><a name='more'></a><br /><br />Первая, наиболее редкая - нехватка квалификации. Человек изобретал свой велосипед, не зная про простое стандартное решение в одну строку.<br /><br />Вторая, наиболее распространенная - скрытая проблема. Человек пытался обойти какую-то проблему, усердно возводя костыли и подпорки. Если при этом нет пояснения или предупреждения, то очень плохо - какой-то <a href="http://stackoverflow.com/questions/184618/what-is-the-best-comment-in-source-code-you-have-ever-encountered">комментарий</a> должен быть. В идеале, тут же должна быть описана проблема, рассмотренные варианты, <a href="http://blog.blzr.me/2012/12/blog-post_26.html">обоснование</a> выбранного решения, ссылка на тикет в багтрекере проблемного компонента.<br /><br /><div class="separator" style="clear: both; text-align: center;"><object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="http://img.youtube.com/vi/FWSxSQsspiQ/0.jpg" height="266" width="320"><param name="movie" value="http://youtube.googleapis.com/v/FWSxSQsspiQ&source=uds" /><param name="bgcolor" value="#FFFFFF" /><param name="allowFullScreen" value="true" /><embed width="320" height="266"  src="http://youtube.googleapis.com/v/FWSxSQsspiQ&source=uds" type="application/x-shockwave-flash" allowfullscreen="true"></embed></object></div>Третья, наиболее интересная - <a href="http://d3.ru/comments/270605/">перцептивная слепота</a>. Человек настолько сконцентрирован на решении определенной задачи, которая захватила все 7 плюс-минус 2 ячейки внимания, что не видит очевидных проблем или решает задачу странным образом. Отсюда и возникает требование делать кодревью, идеи парного программирования.<br /><br />Во втором случае либо патчить, либо ждать, пока компонент будет починен, выпилен, проблема рассосется, хотя не стоит на это рассчитывать. В первом и третьем случае если можно быстро переписать, руководствуясь правилом бойскаутов - оставлять код после себя чище, чем был - то стоит это сделать. Если же объем работы большой, то нужно воткнуть значок "Заминировано". Хотя, если до сих пор это никто не заметил, то скорее всего (иногда <a href="http://blog.blzr.me/2013/04/blog-post_9.html">бывает</a>) это не вызывает проблем, за исключением, конечно, ситуации поиска проблемы.<br /><h4 style="text-align: left;">Baby duck syndrome</h4><div style="text-align: left;">Споры "почему технология X а не Y" редко бывают конструктивны. Когда есть несколько альтернатив, выбор сделан и выбор удачен (достаточно хорошо решает задачи), автоматически появляется синдром утёнка, определяющий выбор технологии на годы вперёд. Позле этого предложение переехать на новую технологию воспринимаются без энтузиазма либо вообще никак не воспринимаются - зачем трогать работающий инструмент? - это чревато переработками.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Здесь кроется проблема, потому что иногда переезд может дать мощнейший <a href="http://blog.blzr.me/2012/03/lot-of-fun.html">буст</a> проекту. В любом случае, мы считаем людей вокруг здравомыслящими, от очевидного профита никто отказываться не будет. А если профит не очевиден, то зачем менять шило на мыло.</div><h4 style="text-align: left;">Достаточно хорошо</h4><div style="text-align: left;">Правило Парето никто не отменял: если выбранное решение достаточно хорошо, то скорее всего мы достигли 80%, тратить еще 80% времени на выигрыш 20% редко обосновано. Мы делаем <a href="http://blog.blzr.me/2012/12/blog-post_26.html">допущение</a> и пишем коммент: здесь объем настолько мал, что мы не паримся и решаем задачу в лоб. Когда-нибудь, возможно, объем данных вырастет и придется тратить время на оптимизацию, а коммент позволит быстро найти потенциально узкое место. Конечно, понятие достаточности у всех разное, но тут, опять же, хватит второй пары глаз.<br /><br />Похожий вопрос возникает когда спрашивают: "А почему вы это не сделали? Это же по Фэн-Шую, хорошая практика и все так делают". Ну да, мы, в приципе, не дураки, тоже про Фэн-Шуй знаем, но посчитали, что отношение затраты/выигрыш недостаточны, чтобы это делать, когда-нибудь потом, а сейчас есть дела важнее.</div><h4 style="text-align: left;">One step at a time</h4><div style="text-align: left;">Когда вокруг всё плохо, то выбрасывать всё и переписывать с нуля никто не даст. Нужны расчистить эпсилон-окрестность и сделать зоны кристаллизации, вокруг которых будет появляться нормальный код. Даже в крупном проекте реально незаметно изменить ядро, аккуратно расчистив завалы. Главное не исповедовать идеологию "<a href="http://blog.blzr.me/2013/09/blog-post.html">мне насрать на то, что я пишу</a>".</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Наблюдение за крупными платформами типа Java, Python, Django прививает идею обратной совместимости, <a href="http://blog.blzr.me/2012/10/blog-post_13.html">постепенного развития</a> и жизненного цикла фич: запрос на реализацию, обсуждение, реализация, пометка нежелательным к применению, удаление. В книге <a href="http://blog.blzr.me/2013/08/effective-java.html">Effective Java</a> описано много таких фич, которые оказались не очень удачными.</div></div>