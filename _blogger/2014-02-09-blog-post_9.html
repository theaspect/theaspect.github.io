---
layout: post
title: Заставившие задуматься эпизоды из жизни эникейщика
date: '2014-02-09T14:19:00.002+07:00'
author: Constantine Linnick
tags:
- боль
- работа
- lytdybr
- development
- epiphany
modified_time: '2014-04-10T15:47:19.639+07:00'
thumbnail: http://2.bp.blogspot.com/-R7KY0NXElsI/S7WlearCkBI/AAAAAAAAAjw/BhvMmMSy0Hc/s72-c/0002dcb8.jpg
blogger_id: tag:blogger.com,1999:blog-372595778394672936.post-2326872729048385919
blogger_orig_url: http://blog.blzr.me/2014/02/blog-post_9.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">В очередном капитанском <a href="http://jdevelop.livejournal.com/2073116.html">посте</a> у jdevelop увидел старую эпичную <a href="http://dm-kalashnikov.livejournal.com/262600.html">ссылку</a> про инженерную археологию и реверс-инженеринг завода. Сразу вспомнилось несколько кулстори из жизни эникейщика, произошедших на заре карьеры: такие себе инсайты, заставившие крепко задуматься о происходящем и мысленно провести <a href="http://en.wikipedia.org/wiki/After_action_review">After Action Review</a>.<br /><a name='more'></a><br /><h4 style="text-align: left;"><a href="http://2.bp.blogspot.com/-R7KY0NXElsI/S7WlearCkBI/AAAAAAAAAjw/BhvMmMSy0Hc/s1600/0002dcb8.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://2.bp.blogspot.com/-R7KY0NXElsI/S7WlearCkBI/AAAAAAAAAjw/BhvMmMSy0Hc/s1600/0002dcb8.jpg" height="302" width="320" /></a>Эпизод 1. Сетап</h4><div style="text-align: left;">Нужно было сконфигурировать и поставить в Питерскую гостиницу <a href="http://ru.wikipedia.org/wiki/AAA_%28%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D1%8C%29">AAA</a> систему из шести устройств для доступа в интернет по карточкам. Вообще это была эпичнейшая история, как студент без опыта, на совершенно диком и незнакомом стеке технологий (FreeBSD/C++) пол года корячил фичу, на которую у опытного разработчика ушла неделя.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Короче, система готова, настроена в единственном уникальном экземляре без описания и возможности быстро повторить, поскольку настройка шла методом проб и ошибок, пока конфигурация не стала рабочей. И внутренне я понимал, что будет большой бадабум, если что-то сломается или подключат не так. В итоге я себе дал твердую установку: всё документировать.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Примерно в это же время я открыл для себя, что для подключения периферии к материнской плате бумажная документация не нужна (можно <a href="http://www.ixbt.com/mainboard/gigabyte/ma790gp-ds4h/board.jpg">обратить</a> внимание на цветные коннекторы в левом нижнем углу) - вся необходима&nbsp; информация нанесена прямо на плату. Вооружившись этим открытием, я пошел и купил перманентный маркер и подписал каждый кабель, каждое устройство и каждый порт, что во что должно подцепляться. Когда шеф увидел, спросил зачем я изрисовал железки. Я сказал, мол всё равно будут валяться в каком-нибудь чулане и никто на них смотреть не будет, а при подключении тамошний админ скажет спасибо. Не знаю, оценил ли он, но проблем с подключением не было. Спустя пол года позвонил и спросил как часовой пояс перевести.</div><h4 style="text-align: left;">Эпизод 2. Телефония</h4><div style="text-align: left;">Отправили меня к клиенту, чтобы я трафик зарезал нашей системой из первого эпизода. Когда я приехал туда, выяснилось, что их потребности покрываются стандартным файрволом роутера (всем кроме директора зарезать всё кроме почты). Но железка уже продана и надо ставить. Причем с этой дикой конфигурацией будет гораздо больше проблем, чем если все настроить на роутере. В итоге на комп была поставлена убунта и bridge-utils, чтобы работать трубой и гудеть вентиляторами. Спустя пару лет местный админ позвонил и спросил что делает железка: пароль никто не помнит, если её выключить интернеты перестают работать (еще бы, она же перед роутером стоит), если все подсоединить напрямую к роутеру то все работает - зачем же она нужна? Я ему все рассказал что это тупо бридж, на что он ответил: О! Круто, как раз комп нужен, скажу что произвел оптимизацию системы и железка больше не нужна.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Но веселье было не с железкой. Казалось бы: перенести железку из одной комнаты в серверную и переткнуть пару проводов. Пароля от модема нет, настроек нет. Первый день потратили чтобы поехать в ростелеком и получить настройки. Переподключили, все работает, собрался домой, только отошел - звонок, возвращайся, все сломалось. Пришел, вернул всё как было - заработало, потом опять отвалилось. Вот зе фак. Главбух на меня смотрит волком: им нужно базу синхронизировать, ADSL не работает, хорошо что есть резервный диалап, но сильно медленней, еще я её из-за компа выгоняю и она вынуждена бездельничать. Вызвали техников, те приехали проверили, все работает. Посоветовали заменить модем. Новый дорогой модем с вайфаем вел себя точно так же. Опять вызвали спецов, на этот раз приехали два очкастых усача с чемоданами и начали проверять линию. Долго ковырялись. Потом достают дешевый китайский модем, он подключается. Наш дорогой, пытается подключиться и отваливается. Директор покраснел и начал кричать матом: мне что солить эти модемы что-ли. Поехал, поменял на дешевый китайский. И настало счастье. Все это длилось почти неделю и я сильно задумался о затратах бизнеса на всё это веселье.</div><h4 style="text-align: left;">Эпизод 3. Админ</h4><div style="text-align: left;">Отправили меня в местные ебеня за 75 км от Кемерово на производство с заданием починить интернеты, когда шеф привез, сказал: как всё починю, набери - приеду, заберу. Ок, началось как квест: вы в темной комнате, под ногами валяется какая-то хрень. Сидит тетка, бухгалтер вроде. Начинаю распросы и выясняется: спутниковый интернет, перестал работать, баланс на телефоне положительный, да компьютер перезагружали, местный админ есть, но просить его починить нельзя, он обиделся и ушел. Вот пидорас, подумал я, он, значит, обиделся, а в ебеня ехать пришлось мне. Поскольку ехать сюда еще раз очень не хотелось, поэтому нужно было починить так, чтобы не ломалось, а если и ломалось, то было починябельно слесарем дядей Васей после недельного запоя.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Первый квест был - найти договор, инструкцию, хоть что-то чтобы выйти на провайдера. Тетка ушла, долго копашилась в своем архиве, принесла пачку бумаг. Мы долго искали, наконец нашли название конторы (без контактных данных). Хорошо, что у меня был на телефоне интернет и мы быстро нашли телефон саппорта. Дозвонились, у нас потребовали аутентифицировать себя фамилией, хорошо, мы вам перезвоним. С третьей попытки мы успешно прошли этот этап, чтобы узнать, что они всего лишь перепродажники и техподдержкой не занимаются. Дали нам телефон провайдера, номер договора и пароль. Дозвонились, там саппорт сходу: на рабочем столе нажмите иконку со спутником. Я: воу-воу, палехчи, на рабочем столе миллион иконок, но нет ни одной со спутником. Куда обычно ставится программа - на диск C, там тоже нет. А как называется программа? Нашел поиском - админ её скинул с какую-то папку с неочевидным названием. Дальше уже был одело техники: поправить коэффиценты подключения, попытки с третьей всё завелось. В итоге я им остали подробнейшую инструкцию со всеми номерами телефона, и секретными фразами которые надо произносить, что где находится и куда вбивать цифры, которые будут произносить по телефону. Больше я туда не ездил.</div><h4 style="text-align: left;"></h4><h4 style="text-align: left;">Эпизод 4. Автоматизация</h4><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; margin-left: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-KpXU4JZI1p4/S7WllwALR_I/AAAAAAAAAjw/fKoiGuw50ZU/s1600/0002kt78.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://3.bp.blogspot.com/-KpXU4JZI1p4/S7WllwALR_I/AAAAAAAAAjw/fKoiGuw50ZU/s1600/0002kt78.jpg" height="263" width="320" /></a></td></tr><tr><td><a href="http://2.bp.blogspot.com/-T_ury9Lgtmk/S7WlqqiLkUI/AAAAAAAAAjw/0CiNMRJWWy4/s1600/0002tpx5.jpg" imageanchor="1" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-T_ury9Lgtmk/S7WlqqiLkUI/AAAAAAAAAjw/0CiNMRJWWy4/s1600/0002tpx5.jpg" height="320" width="273" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Печать, открывашка, иногда водка - святая святых</td></tr></tbody></table><div style="text-align: left;">В самом начале сентября, на четвертом курсе, забив на учебу, отправился с шефом в командировку на юг области по крупным городам, ставить свою софтину для отчетности. Она была очень серверная, с ораклом и томкатом. Установка была ручная: поставить яву, поставить оракл, прописать PATH, распаковать сервер, залить дамп, прописать автозагрузку, скинуть ярлыки на рабочий стол для доступа к интерфейсу и перезапуска. Мне это очень быстро надоело и я начал по вечерам в отеле заполнять батник с командами, чтобы хоть как-то автоматизировать этот тупой процесс. Когда мы вернулись через неделю, то этот батник очень быстро был сконвертирован в nsis скрипт в один клик устанавливающий нашу софтину и удаляющий. Из-за оракла она весила сотни метров, но влезала на компакт диск. Когда департаменты приезжали, мы им выдавали обновленные версии.<br /><br />Обновления были маленькие и частые, и их очень хотелось рассылать по почте. Тот же самый скрипт был немного переписан и состоял из нескольких вещей: подменить файлы, выполнить скрипт, залить данные, перезапустить сервер. Патчи было очень просто собирать и спустя год установка состояла из одного большого файла и трех десятков патчей. Я долго хотел сделать куммулятивную версию, но этому не суждено было случиться: мы перешли на <a href="http://doxcell.ru/">централизованную</a> версию.<br /><br />Кстати, еще один момент был: JRE можно было не устанавливать, а просто копировать прописав правильные пути. Болевой точкой был Oracle XE, который очень долго устанавливался и хотелось просто копировать его с минимальными усилиями. Это было возможно, поскольку на моем компе Оракл пережил три переустановки системы и две материнки. Я даже расковырял сценарий установки и сумел руками выполнить все команды, чтобы получить рабочий инстанс. Но, как это часто бывает, <a href="http://ru.wikibooks.org/wiki/%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B_%D0%9A%D1%80%D0%B8%D1%81%D1%82%D0%BE%D0%B1%D0%B0%D0%BB%D1%8F_%D0%A5%D1%83%D0%BD%D1%82%D1%8B">решаемая задача</a> становится резко неинтересной, да и пропала необходимость в связи с переездом. Но быстрый установщик Оракла на NSIS - это было бы очень круто. Because I can.</div><h4 style="text-align: left;">Эпизод 5. Пароль</h4><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-fhC1fxjDUZY/S7WnUF2mKDI/AAAAAAAAAjw/WHzTsNqM0sk/s1600/00033z3a.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://3.bp.blogspot.com/-fhC1fxjDUZY/S7WnUF2mKDI/AAAAAAAAAjw/WHzTsNqM0sk/s1600/00033z3a.jpg" height="320" width="240" /></a></div><div style="text-align: left;"><a href="http://2.bp.blogspot.com/-cHOTYFindWY/S7WoRCE04UI/AAAAAAAAAjw/r-5sKqSCo0w/s1600/0003187h.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" src="http://2.bp.blogspot.com/-cHOTYFindWY/S7WoRCE04UI/AAAAAAAAAjw/r-5sKqSCo0w/s1600/0003187h.jpg" height="320" width="240" /></a>Контора с непроизносимым названием КРИПКиПРО выделил нам сервер, чтобы водрузить туда нашу систему (то непередаваемое веселье от работы с ними заслуживает отдельного поста). Шеф сказал, сходи забери сервер. Ну ок, пару сотен метров, системник донесу. Пришел к ним, давайте ваш сервер. А где твой товарищ? Какой товарищ? Ну сервер нести. Эээээ?! Показывают медицинскую каталку с полноценным одноюнитовым серваком. Звоню шефу: приезжайте, забирайте меня. Ок, отвезли в офис, я настроил всё это дело. Помня предудущие эпизоды (у сервера пять салазок для жестких дисков и шестая - пустая) подумал: надо куда-то засунуть пароль. Взял стикер, написал пароль и засунул в пустой слот. Отвезли, воткнули в стойку.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Приходим спустя какое-то время. Нам жалуются: сервера и так шумные, но ваш как-то особенно громко тарахтит, что аж в актовом зале слышно (а серверная это такая админская каморка в углу актового зала). Ну фиг знает, тарахтит и тарахтит. Иду перетыкать клавиатуру (кстати, хотелось послать лучи ненависти тому мудаку-инженеру, который кнопку сброса расположил прямо над USB разъемами так, что большой палец очень удобно нажимал на эту самую кнопку при втыкании флешки). KVM у них не было. Смотрю на заднюю панель - что-то цветное. И тут закрадываются подозрения. Срочно вырубаем, вытаскиваем, открываем крышку и что мы видим: кулера-турбины всосали ту самую бумажку с паролем, порубили в мелкое конфетти и выплюнули через зад. А те части, что были с клеевой полоской налипли на турбину. Они-то и тарахтели, как в детстве картонка по спицам на колесе велосипеда. В следующий раз я более тщательно относился к выбору коврика, под который спрятать ключ от двери.</div></div>