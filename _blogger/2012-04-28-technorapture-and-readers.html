---
layout: post
title: 'Maven: the complete reference'
date: '2012-04-28T14:00:00.000+07:00'
author: Constantine Linnick
tags:
- книги
- ретроспектива
modified_time: '2013-03-19T03:37:12.103+07:00'
blogger_id: tag:blogger.com,1999:blog-372595778394672936.post-3865043823125904072
blogger_orig_url: http://blog.blzr.me/2012/04/technorapture-and-readers.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div class="separator" style="clear: both; text-align: center;"><a href="http://www.sonatype.com/people/wp-content/uploads/2010/02/maven-reference-cover.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="320" src="http://www.sonatype.com/people/wp-content/uploads/2010/02/maven-reference-cover.png" width="246" /></a></div>На работе пеход на Idea  принес с собой систему сборки Maven. До этого мои знания ограничивались "ну это  типа анта, там тоже XML", "у них в репозитории хранятся все библиотеки, и нет  необходимости качать кучу jar библиотек". После переезда захотелось более  подробно вникнуть в систему, чтобы в проекте не было хранителей сакральных  знаний, и, при необходимости, самому допиливать скрипты.<br /><br /><a name='more'></a><br /><br />Первый взгляд на  pom файл, абсолютно не проясняет, как из этого конфига получается проект. Беглое  введение тоже не дало ответов, пришлось качать книги. К моему сожалению  "Complete Reference" писали опытные в запуске холодного синтеза люди. Было  совершенно непонятно на какой уровень читателя рассчитана книга. С каждой  следующей главой вводились все новые сущности, а ответов на вопросы не  появлялось. Над некоторыми абзацами приходилось сидеть минут по десять, раз за  разом перечитывая и пытаясь понять, что же хотели сказать авторы.<br /><br />Самый  эпичный перл: у нас есть плагин clean, у него есть цель clean:clean, привязанная  к фазе clean, и когда мы запускаем clean из командной строки, запускается clean  а не clean:clean. ААААА, что за херня.<br /><br />Вопросов стало настолько много,  что пришлось выписать их на бумажки и лезть на официальный сайт за ответами,  после чего стало более менее ясно, по крайней мере, я теперь могу написать pom  для простенького проекта.<br /><br />Тем не менее, какие-то мысли я вынес.<br />* В  Maven есть базовый pom файл, в котором прописана куча умолчательных параметров,  а все проектные файлы наследуются от него, что позволяет драматически сократить  размер конфигурации и время для понимания стандартного maven-проекта.<br /><br />*  Maven это не альтернатива Ant, а идеология принесенная в структуру проекта,  более того, Ant может быть использован в качестве одного из плагинов Maven, для  особо сложных случаев. Ант процедурен, а Maven декларативен.<br /><br />* Идеология  Maven это навешивание плагинов на точки расширения в жизненном цикле проекта.  Жизненный цикл диктуется типом упаковки артефакта.<br /><br />* Типы переносимости  проектов<br />- <i>Непереносимый проект</i>: тесно привязан к окружению и перенос  его на другую машину связан с большими техническими трудностями по  воспроизводству окружения и переписыванию скриптов сборки под себя.<br />-  <i>Переносимый на уровне среды</i>: в проекте вынесена конфигурация среды и  новый разработчик должен указать параметры свое среды для запуска<br />-  <i>Переносимый на уровне организации</i>: проект привязан к определенным  ресурсам внутри организации, таким как репозитории, субд, службы. Проект может  быть переносимым, но до тех пор, пока доступны внутренние ресурсы.<br />-  <i>Глобально переносимый проект</i>: может быть забран из репозитория и собран  без конфигурирования в любой среде.<br /><br />Уровень переносимости не дискретен, и  чем более переносимым должен быть проект, тем больше усилий это требует. Maven  позволяет задавать профайлы, которые будут активироваться в тех или иных средах.  Чем менее переносим проект, тем сложнее в нем добавлять зависимости. А  развертывание требует обращения к специальным людям, отвечающим за этот  магический процесс. Непереносимые проекты имеют тенденцию появляться в  политизированных организациях, когда небольшая группа людей, обладающих  сакральным знанием захватывает контроль над тем, как проект собирается и  развертывается. "Как нам собрать проект и развернуть систему? Оу, мы должны  попросить Джека собрать проект для нас, никто больше не развертывает систему на  продакшене. Это очень опасно и гораздо более распространенная ситуация, чем вы  можете представить."<br /><br />* Все сайты проектов, на сервере Apache  сгенерированы при помощи Maven.<br /><br />* Maven построен на Dependency Injection  платформе Plexus, которая появилась до Spring.<br /><br />* В Maven имеются шаблоны  и заготовки для большого количества проектов, Archetypes в терминологии  Maven<br /><br /><b>Итог</b><br />Великолепным инструмент и ужасная книга</div>